<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Chatbot</title>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">

  <div class="max-w-2xl mx-auto mt-10 bg-white rounded-2xl shadow-lg p-6">
    <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">üí¨ Vinzz Chatbot</h2>
    
    <div id="chatBox" class="flex flex-col gap-3 h-96 overflow-y-auto p-3 rounded-xl bg-gray-50"></div>

    <div class="flex gap-3 mt-4">
      <input id="userInput" type="text" placeholder="Tanyakan sesuatu..." 
             class="flex-1 border border-gray-300 rounded-xl px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400">
      <button onclick="sendMessage()" 
              class="bg-green-500 hover:bg-green-600 text-white font-semibold px-5 py-2 rounded-xl transition">
        Kirim
      </button>
    </div>
  </div>

  <script>
    async function sendMessage() {
      const inputField = document.getElementById('userInput');
      const chatBox = document.getElementById('chatBox');
      const userText = inputField.value.trim();
      if (!userText) return;

      appendMessage(userText, 'user');
      inputField.value = '';

      const loading = document.createElement('div');
      loading.className = 'text-gray-500 italic text-center';
      loading.textContent = 'AI sedang mengetik...';
      chatBox.appendChild(loading);
      chatBox.scrollTop = chatBox.scrollHeight;

      try {
        const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
          method: "POST",
          headers: {
            "Authorization": "Bearer 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",
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            model: "deepseek/deepseek-r1-0528-qwen3-8b:free",
            messages: [{ role: "user", content: userText }]
          })
        });

        const data = await response.json();
        loading.remove();

        const botText = data.choices?.[0]?.message?.content || 'Tidak ada respons dari AI.';
        appendMessage(marked.parse(botText), 'bot');
      } catch (error) {
        loading.remove();
        appendMessage('‚ùå Error: ' + error.message, 'bot');
      }

      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function appendMessage(text, sender) {
      const chatBox = document.getElementById('chatBox');
      const msg = document.createElement('div');
      msg.innerHTML = text;
      msg.className = `px-4 py-2 rounded-xl max-w-[80%] animate-fadeIn ${sender === 'user' ? 'bg-blue-500 text-white self-end' : 'bg-gray-200 text-gray-800 self-start'}`;
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
    }
  </script>

  <style>
    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(5px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    .animate-fadeIn {
      animation: fadeIn 0.3s ease forwards;
    }
  </style>

</body>
</html>
